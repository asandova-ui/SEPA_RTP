<!-- RTP.html: Contenido de la sección Request to Pay -->
<div id="rtpContent">
    <h3>Request to Pay</h3>
    <p>Dependiendo del rol (beneficiary, psp_beneficiary, psp_payer, payer) verás acciones diferentes.</p>
    
    <!-- Beneficiary actions -->
    <div class="card mb-4 invisible-section" id="beneficiaryActions">
      <div class="card-header bg-success text-white">Beneficiary: Crear RTP</div>
      <div class="card-body">
        <!-- ÚNICAMENTE IBAN Y MONTO -->
        <form id="createRTPForm" class="row g-3 mb-3">
          <div class="col-md-6">
            <label for="ibanField" class="form-label">IBAN</label>
            <input type="text" id="ibanField" class="form-control" required>
          </div>
          <div class="col-md-6">
            <label for="amountField" class="form-label">Monto</label>
            <input type="number" step="0.01" id="amountField" class="form-control" required>
          </div>
          <div class="col-md-12 d-flex justify-content-end">
            <button type="submit" class="btn btn-success">Crear RTP</button>
          </div>
        </form>
        <div id="createRTPResponse" class="alert alert-secondary invisible-section"></div>
        <!-- Contenedor para notificaciones dirigidas al Beneficiary -->
        <div id="beneficiaryNotification" class="alert alert-info invisible-section mt-3"></div>
      </div>
    </div>
    
    <!-- PSP Beneficiary actions -->
    <div class="card mb-4 invisible-section" id="pspBeneficiaryActions">
      <div class="card-header bg-warning text-dark">PSP Beneficiary: Validar / Enrutar</div>
      <div class="card-body">
        <form id="validateBeneficiaryForm" class="row g-3 mb-3">
          <div class="col-md-3">
            <label for="rtpIdValidateBene" class="form-label">ID del RTP</label>
            <input type="number" id="rtpIdValidateBene" class="form-control" required>
          </div>
          <div class="col-md-3 d-flex align-items-end">
            <button type="submit" class="btn btn-warning text-white">Validar RTP</button>
          </div>
        </form>
        <div id="validateBeneficiaryResponse" class="alert alert-secondary invisible-section"></div>
        <form id="routeForm" class="row g-3">
          <div class="col-md-3">
            <label for="rtpIdRoute" class="form-label">ID del RTP</label>
            <input type="number" id="rtpIdRoute" class="form-control" required>
          </div>
          <div class="col-md-3 d-flex align-items-end">
            <button type="submit" class="btn btn-warning text-white">Enrutar RTP</button>
          </div>
        </form>
        <div id="routeResponse" class="alert alert-secondary invisible-section"></div>
        <!-- Contenedor para notificaciones de PSP Beneficiary (ya existía) -->
        <div id="rtpNotification" class="alert alert-info invisible-section mt-3"></div>
      </div>
    </div>
    
    <!-- PSP Payer actions -->
    <div class="card mb-4 invisible-section" id="pspPayerActions">
      <div class="card-header bg-info text-white">PSP Payer: Validar</div>
      <div class="card-body">
        <form id="validatePayerForm" class="row g-3">
          <div class="col-md-4">
            <label for="rtpIdValidatePayer" class="form-label">ID del RTP</label>
            <input type="number" id="rtpIdValidatePayer" class="form-control" required>
          </div>
          <div class="col-md-4 d-flex align-items-end">
            <button type="submit" class="btn btn-info text-white">Validar RTP</button>
          </div>
        </form>
        <div id="validatePayerResponse" class="alert alert-secondary invisible-section"></div>
        <!-- Contenedor para notificaciones de PSP Payer -->
        <div id="pspPayerNotification" class="alert alert-info invisible-section mt-3"></div>
      </div>
    </div>
    
    <!-- Payer actions -->
    <div class="card mb-4 invisible-section" id="payerActions">
      <div class="card-header bg-danger text-white">Payer: Decidir</div>
      <div class="card-body">
        <form id="decisionForm" class="row g-3">
          <div class="col-md-4">
            <label for="rtpIdDecision" class="form-label">ID del RTP</label>
            <input type="number" id="rtpIdDecision" class="form-control" required>
          </div>
          <div class="col-md-4">
            <label for="decision" class="form-label">Decisión</label>
            <select id="decision" class="form-select">
              <option value="aceptado">aceptado</option>
              <option value="rechazado">rechazado</option>
            </select>
          </div>
          <div class="col-md-4 d-flex align-items-end">
            <button type="submit" class="btn btn-danger">Enviar Decisión</button>
          </div>
        </form>
        <div id="decisionResponse" class="alert alert-secondary invisible-section"></div>
        <!-- Contenedor para notificaciones de Payer -->
        <div id="payerNotification" class="alert alert-info invisible-section mt-3"></div>
      </div>
    </div>
  
      <!-- Ahora ponemos primero NOTIFICACIONES RECIBIDAS -->
    <div class="card mb-4" id="notificationsCard">
      <div class="card-header bg-secondary text-white">
        Notificaciones Recibidas
      </div>
      <div class="card-body">
        <!-- Tabla donde listaremos todas las notificaciones -->
        <table class="table table-bordered" id="notificationsTable">
          <thead>
            <tr>
              <th>ID</th>
              <th>Monto</th>
              <th>Estado (status)</th>
              <th>Acción</th>
            </tr>
          </thead>
          <tbody>
            <!-- Se llenará dinámicamente con JavaScript (RTP.js) -->
          </tbody>
        </table>
      </div>
    </div>

    <!-- Logs -->
    <div class="card mb-4">
      <div class="card-header bg-secondary text-white">Logs</div>
      <div class="card-body">
        <button id="showLogs" class="btn btn-secondary">Mostrar Logs</button>
        <div id="logsResponse" class="mt-3"></div>
      </div>
    </div>
</div>
